<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Криминальный Блеф</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#0A0A0A">
    <meta name="description" content="Интерактивная игра-викторина с криминальными историями">

    <!-- Подключение Telegram WebApp API ПЕРВЫМ с защитой SRI -->
    <script src="https://telegram.org/js/telegram-web-app.js"
        integrity="sha384-E7bZJoZ9+8DJxhEo4jfK8t8XhCJaNu7xG5QbR4Zt8KYdZ9Q8rHCjW9GjS0JxB6V3"
        crossorigin="anonymous"></script>

    <style>
        :root {
            /* Современная цветовая палитра */
            --crime-scene: linear-gradient(135deg, #0A0A0A 0%, #1A1A1A 100%);
            --blood-red: #DC143C;
            --neon-red: #FF073A;
            --crimson: #C41E3A;
            --bone: #F5F5DC;
            --shadow: #000000;
            --electric-blue: #00BFFF;

            /* Градиенты */
            --blood-gradient: linear-gradient(135deg, #DC143C, #FF073A, #C41E3A);
            --card-gradient: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(20, 20, 20, 0.98) 100%);
            --accent-gradient: linear-gradient(135deg, #DC143C, #FF073A);

            /* Тени */
            --shadow-deep: 0 20px 40px rgba(0, 0, 0, 0.8), 0 0 30px rgba(220, 20, 60, 0.1);
            --shadow-glow: 0 0 20px rgba(220, 20, 60, 0.3);
            --shadow-text: 0 0 10px rgba(220, 20, 60, 0.5);

            /* Эффекты */
            --blur-heavy: blur(20px);
            --blur-light: blur(10px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--crime-scene);
            color: var(--bone);
            line-height: 1.4;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Анимированный фоновый эффект */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(220, 20, 60, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 7, 58, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(196, 30, 58, 0.05) 0%, transparent 50%);
            animation: bloodFlow 25s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        /* Тематические элементы фона */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                /* Отпечатки пальцев */
                radial-gradient(circle at 15% 25%, rgba(220, 20, 60, 0.15) 2px, transparent 3px),
                radial-gradient(circle at 85% 75%, rgba(220, 20, 60, 0.12) 1.5px, transparent 2.5px),
                radial-gradient(circle at 25% 80%, rgba(220, 20, 60, 0.1) 2.5px, transparent 3.5px),
                radial-gradient(circle at 75% 30%, rgba(220, 20, 60, 0.08) 1px, transparent 2px),
                /* Следы крови */
                radial-gradient(ellipse 8px 3px at 30% 15%, rgba(139, 0, 0, 0.3) 30%, transparent 70%),
                radial-gradient(ellipse 5px 2px at 70% 85%, rgba(139, 0, 0, 0.25) 30%, transparent 70%),
                radial-gradient(ellipse 6px 2.5px at 90% 40%, rgba(139, 0, 0, 0.2) 30%, transparent 70%),
                /* Линии сетки доказательств */
                linear-gradient(90deg, transparent 49%, rgba(255, 215, 0, 0.05) 50%, transparent 51%),
                linear-gradient(0deg, transparent 49%, rgba(255, 215, 0, 0.05) 50%, transparent 51%);
            background-size:
                150px 150px, 200px 200px, 180px 180px, 120px 120px,
                60px 20px, 80px 25px, 70px 22px,
                100px 100px, 100px 100px;
            background-position:
                10% 20%, 80% 70%, 20% 75%, 70% 25%,
                25% 10%, 65% 80%, 85% 35%,
                0 0, 0 0;
            opacity: 0.4;
            pointer-events: none;
            z-index: 1;
            animation: evidenceFloat 30s ease-in-out infinite;
        }

        @keyframes evidenceFloat {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.4;
            }

            25% {
                transform: translate(5px, -5px) rotate(1deg);
                opacity: 0.6;
            }

            50% {
                transform: translate(-3px, 3px) rotate(-0.5deg);
                opacity: 0.5;
            }

            75% {
                transform: translate(3px, -2px) rotate(0.5deg);
                opacity: 0.45;
            }
        }

        /* Полицейская лента декорация */
        .police-tape {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
        }

        .police-tape::before {
            content: 'CRIME SCENE - DO NOT CROSS • МЕСТО ПРЕСТУПЛЕНИЯ - НЕ ПЕРЕСЕКАТЬ • ДОКАЗАТЕЛЬСТВА • EVIDENCE • CRIME SCENE - DO NOT CROSS • МЕСТО ПРЕСТУПЛЕНИЯ - НЕ ПЕРЕСЕКАТЬ • ДОКАЗАТЕЛЬСТВА • EVIDENCE • ';
            position: absolute;
            top: 8%;
            left: 0;
            width: 300%;
            height: 25px;
            background: repeating-linear-gradient(45deg,
                    #FFD700 0px,
                    #FFD700 10px,
                    #FFA500 10px,
                    #FFA500 20px);
            color: #000;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            font-weight: bold;
            line-height: 25px;
            text-align: left;
            letter-spacing: 2px;
            transform: rotate(-5deg);
            animation: tapeScroll 20s linear infinite;
            opacity: 0.8;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border-top: 1px solid rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(0, 0, 0, 0.2);
            white-space: nowrap;
        }

        .police-tape::after {
            content: 'EVIDENCE • УЛИКИ • INVESTIGATION • РАССЛЕДОВАНИЕ • EVIDENCE • УЛИКИ • INVESTIGATION • РАССЛЕДОВАНИЕ • ';
            position: absolute;
            bottom: 12%;
            right: 0;
            width: 300%;
            height: 20px;
            background: repeating-linear-gradient(-45deg,
                    #DC143C 0px,
                    #DC143C 8px,
                    #8B0000 8px,
                    #8B0000 16px);
            color: #FFF;
            font-family: 'JetBrains Mono', monospace;
            font-size: 8px;
            font-weight: bold;
            line-height: 20px;
            text-align: left;
            letter-spacing: 1px;
            transform: rotate(3deg);
            animation: tapeScroll 25s linear infinite reverse;
            opacity: 0.7;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            white-space: nowrap;
        }

        @keyframes tapeScroll {
            0% {
                transform: translateX(0) rotate(-5deg);
            }

            100% {
                transform: translateX(-33.33%) rotate(-5deg);
            }
        }

        /* Улучшенные частицы */
        .particle {
            position: absolute;
            background: var(--neon-red);
            border-radius: 50%;
            opacity: 0.7;
            animation: floatParticle 20s linear infinite;
        }

        .particle:nth-child(3n) {
            width: 3px;
            height: 3px;
            background: #FFD700;
            animation-duration: 25s;
        }

        .particle:nth-child(4n) {
            width: 1px;
            height: 4px;
            background: #8B0000;
            border-radius: 2px;
            animation-duration: 15s;
        }

        .particle:nth-child(5n) {
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.6);
            animation-duration: 18s;
        }

        /* Дополнительные декоративные элементы */
        .evidence-markers {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .evidence-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #FFD700;
            border-radius: 50%;
            opacity: 0.6;
            animation: markerPulse 4s ease-in-out infinite;
        }

        .evidence-marker::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background: #FFD700;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .evidence-marker::after {
            content: attr(data-number);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 8px;
            color: #FFD700;
            font-weight: bold;
        }

        .evidence-marker:nth-child(1) {
            top: 25%;
            left: 15%;
            animation-delay: 0s;
        }

        .evidence-marker:nth-child(2) {
            top: 60%;
            right: 20%;
            animation-delay: 1s;
        }

        .evidence-marker:nth-child(3) {
            bottom: 30%;
            left: 25%;
            animation-delay: 2s;
        }

        @keyframes markerPulse {

            0%,
            100% {
                opacity: 0.4;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }
        }

        /* Кровавые капли */
        .blood-drops {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .blood-drop {
            position: absolute;
            width: 4px;
            height: 6px;
            background: radial-gradient(ellipse at center, #8B0000 0%, #4A0404 70%, transparent 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0.7;
            animation: bloodDrip 8s ease-in-out infinite;
        }

        .blood-drop:nth-child(1) {
            top: 10%;
            left: 30%;
            animation-delay: 0s;
        }

        .blood-drop:nth-child(2) {
            top: 70%;
            right: 25%;
            animation-delay: 3s;
        }

        .blood-drop:nth-child(3) {
            bottom: 40%;
            left: 80%;
            animation-delay: 6s;
        }

        @keyframes bloodDrip {

            0%,
            90%,
            100% {
                opacity: 0.5;
                transform: translateY(0) scale(1);
            }

            45% {
                opacity: 0.8;
                transform: translateY(3px) scale(1.1);
            }
        }

        /* Отпечатки пальцев декоративные */
        .fingerprint {
            position: absolute;
            width: 30px;
            height: 40px;
            background-image:
                radial-gradient(ellipse 1px 2px at 50% 20%, #DC143C 50%, transparent 50%),
                radial-gradient(ellipse 1px 2px at 50% 40%, #DC143C 50%, transparent 50%),
                radial-gradient(ellipse 1px 2px at 50% 60%, #DC143C 50%, transparent 50%),
                radial-gradient(ellipse 1px 2px at 50% 80%, #DC143C 50%, transparent 50%);
            background-size: 25px 3px;
            background-repeat: no-repeat;
            opacity: 0.3;
            pointer-events: none;
            animation: fingerprintFade 10s ease-in-out infinite;
        }

        .fingerprint:nth-child(1) {
            top: 15%;
            right: 10%;
            transform: rotate(15deg);
            animation-delay: 0s;
        }

        .fingerprint:nth-child(2) {
            bottom: 25%;
            left: 5%;
            transform: rotate(-10deg);
            animation-delay: 4s;
        }

        @keyframes fingerprintFade {

            0%,
            100% {
                opacity: 0.2;
            }

            50% {
                opacity: 0.4;
            }
        }

        @keyframes bloodFlow {

            0%,
            100% {
                opacity: 0.4;
                transform: scale(1) rotate(0deg);
            }

            33% {
                opacity: 0.6;
                transform: scale(1.2) rotate(120deg);
            }

            66% {
                opacity: 0.5;
                transform: scale(0.8) rotate(240deg);
            }
        }

        /* Мрачные частицы */
        .crime-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .main-container {
            min-height: 100vh;
            position: relative;
            z-index: 10;
            max-width: 500px;
            margin: 0 auto;
            padding: 16px;
        }

        /* Заголовок отдела */
        .department-badge {
            text-align: center;
            margin-bottom: 24px;
            position: relative;
        }

        .badge-container {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: rgba(26, 26, 26, 0.9);
            border: 2px solid var(--blood-red);
            border-radius: 16px;
            padding: 12px 20px;
            backdrop-filter: var(--blur-light);
            box-shadow: var(--shadow-deep);
            position: relative;
            overflow: hidden;
        }

        .badge-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(220, 20, 60, 0.1), transparent);
            animation: badgeScan 3s ease-in-out infinite;
        }

        @keyframes badgeScan {
            0% {
                left: -100%;
            }

            50% {
                left: 100%;
            }

            100% {
                left: -100%;
            }
        }

        .badge-icon {
            width: 24px;
            height: 24px;
            color: var(--neon-red);
            filter: drop-shadow(0 0 8px var(--neon-red));
        }

        .badge-text {
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 1.5px;
            color: var(--crimson);
            text-transform: uppercase;
        }

        /* Главный заголовок */
        .main-title {
            text-align: center;
            margin-bottom: 32px;
        }

        .title {
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 3px;
            background: var(--blood-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: var(--shadow-text);
            margin-bottom: 12px;
            animation: glitchText 6s ease-in-out infinite;
            line-height: 1.1;
        }

        .subtitle {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--bone);
            opacity: 0.9;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        @keyframes glitchText {

            0%,
            96%,
            100% {
                transform: translate(0);
            }

            1%,
            3% {
                transform: translate(-2px, 1px);
                text-shadow: 2px 0 var(--neon-red);
            }

            2% {
                transform: translate(2px, -1px);
                text-shadow: -2px 0 var(--electric-blue);
            }
        }

        /* Информационные карточки */
        .info-cards {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 32px;
        }

        .info-card {
            background: var(--card-gradient);
            border: 2px solid var(--blood-red);
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            backdrop-filter: var(--blur-light);
            box-shadow: var(--shadow-deep);
            transition: all 0.4s ease;
        }

        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            animation: scanLine 4s linear infinite;
        }

        @keyframes scanLine {
            0% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.3;
            }
        }

        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-deep), var(--shadow-glow);
            border-color: var(--neon-red);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .card-icon {
            width: 32px;
            height: 32px;
            color: var(--neon-red);
            filter: drop-shadow(0 0 8px var(--neon-red));
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--bone);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .card-label {
            font-size: 0.75rem;
            color: var(--crimson);
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .card-description {
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--bone);
            opacity: 0.9;
        }

        /* Статистики */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid var(--blood-red);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            position: relative;
            backdrop-filter: var(--blur-light);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--neon-red);
            box-shadow: 0 0 20px rgba(220, 20, 60, 0.2);
            transform: scale(1.02);
        }

        .stat-icon {
            width: 28px;
            height: 28px;
            color: var(--neon-red);
            margin-bottom: 8px;
            filter: drop-shadow(0 0 6px var(--neon-red));
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--neon-red);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--bone);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Главная кнопка */
        .main-action {
            margin-bottom: 24px;
        }

        .start-button {
            width: 100%;
            background: var(--accent-gradient);
            border: none;
            border-radius: 20px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--bone);
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-deep);
            transition: all 0.3s ease;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .start-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-deep), var(--shadow-glow);
        }

        .start-button:hover::before {
            left: 100%;
        }

        .start-button:active {
            transform: translateY(-1px);
        }

        /* Навигация */
        .navigation {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .nav-button {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid var(--blood-red);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            color: var(--bone);
            text-decoration: none;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            backdrop-filter: var(--blur-light);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--accent-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-button:hover {
            border-color: var(--neon-red);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(220, 20, 60, 0.3);
        }

        .nav-button:hover::before {
            opacity: 0.1;
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 8px;
            color: var(--neon-red);
            position: relative;
            z-index: 1;
        }

        .nav-text {
            position: relative;
            z-index: 1;
        }

        /* Подвал */
        .footer {
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid rgba(220, 20, 60, 0.2);
        }

        .case-file {
            font-size: 0.8rem;
            color: var(--bone);
            opacity: 0.6;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* Анимация входа */
        @keyframes criminalEntry {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .main-container>* {
            animation: criminalEntry 0.6s ease-out forwards;
        }

        .main-container>*:nth-child(1) {
            animation-delay: 0.1s;
        }

        .main-container>*:nth-child(2) {
            animation-delay: 0.2s;
        }

        .main-container>*:nth-child(3) {
            animation-delay: 0.3s;
        }

        .main-container>*:nth-child(4) {
            animation-delay: 0.4s;
        }

        .main-container>*:nth-child(5) {
            animation-delay: 0.5s;
        }

        .main-container>*:nth-child(6) {
            animation-delay: 0.6s;
        }

        /* Отзывчивость */
        @media (max-width: 400px) {
            .title {
                font-size: 2.4rem;
            }

            .main-container {
                padding: 12px;
            }

            .quick-stats {
                flex-direction: column;
                gap: 8px;
                padding: 12px;
            }

            .quick-stat {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .quick-stat-value,
            .quick-stat-label {
                display: inline;
            }

            .quick-stat-value {
                font-size: 1.2rem;
                margin-bottom: 0;
            }

            .mini-info-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .mini-info-card {
                padding: 12px;
            }

            .mini-title {
                font-size: 0.8rem;
            }

            .methods-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .detective-methods {
                padding: 16px;
            }

            .info-cards {
                gap: 16px;
            }

            .info-card {
                padding: 20px;
            }

            .card-title {
                font-size: 1.1rem;
            }

            .card-description {
                font-size: 0.9rem;
            }
        }

        /* Loader */
        .loading-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            background: var(--crime-scene);
            z-index: 9999;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(220, 20, 60, 0.2);
            border-top-color: var(--neon-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(220, 20, 60, 0.3);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            color: var(--bone);
            letter-spacing: 1px;
            opacity: 0.8;
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.7;
            }

            90% {
                opacity: 0.7;
            }

            100% {
                transform: translateY(-10vh) translateX(150px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Зловещий мерцающий эффект для заголовка */
        .title::after {
            content: 'КРИМИНАЛЬНЫЙ\AБЛЕФ';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--blood-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            animation: flickerGhost 8s ease-in-out infinite;
            pointer-events: none;
            white-space: pre;
        }

        @keyframes flickerGhost {

            0%,
            94%,
            100% {
                opacity: 0;
            }

            95%,
            97% {
                opacity: 0.7;
                filter: blur(1px);
            }

            96% {
                opacity: 1;
                filter: blur(0px);
                text-shadow: 0 0 20px var(--neon-red);
            }
        }

        /* Быстрая статистика */
        .quick-stats {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(26, 26, 26, 0.6);
            border: 1px solid var(--blood-red);
            border-radius: 16px;
            backdrop-filter: var(--blur-light);
        }

        .quick-stat {
            text-align: center;
            flex: 1;
        }

        .quick-stat-value {
            display: block;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--neon-red);
            margin-bottom: 4px;
        }

        .quick-stat-label {
            font-size: 0.7rem;
            color: var(--bone);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Мини-информационные блоки */
        .mini-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .mini-info-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(26, 26, 26, 0.7);
            border: 1px solid rgba(220, 20, 60, 0.3);
            border-radius: 12px;
            padding: 14px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .mini-info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent-gradient);
            opacity: 0.5;
        }

        .mini-info-card:hover {
            border-color: var(--neon-red);
            transform: translateY(-1px);
            box-shadow: 0 0 15px rgba(220, 20, 60, 0.2);
        }

        .mini-icon {
            width: 32px;
            height: 32px;
            color: var(--neon-red);
            flex-shrink: 0;
        }

        .mini-icon svg {
            width: 100%;
            height: 100%;
        }

        .mini-content {
            flex: 1;
            min-width: 0;
        }

        .mini-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--bone);
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .mini-desc {
            font-size: 0.7rem;
            color: var(--bone);
            opacity: 0.7;
            line-height: 1.3;
        }

        /* Система рангов и прогрессии */
        .detective-methods {
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid var(--blood-red);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            backdrop-filter: var(--blur-light);
            position: relative;
            overflow: hidden;
        }

        .detective-methods::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            animation: scanLine 4s linear infinite;
        }

        .methods-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            color: var(--bone);
        }

        .methods-header svg {
            width: 24px;
            height: 24px;
            color: var(--neon-red);
            filter: drop-shadow(0 0 6px var(--neon-red));
        }

        .methods-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0;
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .method-item {
            position: relative;
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid rgba(220, 20, 60, 0.3);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .method-item:hover {
            border-color: var(--neon-red);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(220, 20, 60, 0.2);
        }

        .method-exp {
            font-size: 0.75rem;
            color: var(--neon-red);
            opacity: 0.8;
            margin-top: 4px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* 🎯 СТИЛИ ДЛЯ СПЕЦИАЛИЗАЦИЙ */
        .specializations-section {
            margin-top: 24px;
            padding: 20px;
            background: rgba(26, 26, 26, 0.6);
            border: 2px solid var(--blood-red);
            border-radius: 16px;
            backdrop-filter: var(--blur-light);
        }

        .specializations-section h4 {
            color: var(--neon-red);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .specializations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .spec-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: rgba(26, 26, 26, 0.8);
            border: 1px solid rgba(220, 20, 60, 0.4);
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .spec-item:hover {
            border-color: var(--neon-red);
            transform: translateY(-1px);
            box-shadow: 0 0 10px rgba(220, 20, 60, 0.3);
        }

        .spec-icon {
            font-size: 1.4rem;
            filter: drop-shadow(0 0 5px currentColor);
        }

        .spec-name {
            font-size: 0.8rem;
            color: var(--bone);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .spec-description {
            text-align: center;
            font-size: 0.8rem;
            color: var(--bone);
            opacity: 0.8;
            line-height: 1.4;
            margin: 0;
        }

        /* 📱 АДАПТИВНОСТЬ ДЛЯ НОВЫХ ЭЛЕМЕНТОВ */
        @media (max-width: 400px) {
            .specializations-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .spec-item {
                padding: 8px 10px;
            }

            .spec-name {
                font-size: 0.75rem;
            }

            .method-exp {
                font-size: 0.7rem;
            }
        }
    </style>
</head>

<body>
    <!-- Полицейская лента -->
    <div class="police-tape"></div>

    <!-- Улики и маркеры -->
    <div class="evidence-markers">
        <div class="evidence-marker" data-number="1"></div>
        <div class="evidence-marker" data-number="2"></div>
        <div class="evidence-marker" data-number="3"></div>
    </div>

    <!-- Кровавые капли -->
    <div class="blood-drops">
        <div class="blood-drop"></div>
        <div class="blood-drop"></div>
        <div class="blood-drop"></div>
    </div>

    <!-- Отпечатки пальцев -->
    <div class="fingerprint"></div>
    <div class="fingerprint"></div>

    <!-- Частицы -->
    <div class="crime-particles" id="particles"></div>

    <!-- Loader -->
    <div class="loading-container" id="loader">
        <div class="loader"></div>
        <div class="loading-text">ЗАГРУЗКА ДЕЛА...</div>
    </div>

    <!-- Главный контейнер -->
    <div class="main-container" id="mainContainer" style="opacity: 0;">

        <!-- Заголовок отдела -->
        <div class="department-badge">
            <div class="badge-container">
                <svg class="badge-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" />
                </svg>
                <span class="badge-text">Отдел Убийств</span>
            </div>
        </div>

        <!-- Главный заголовок -->
        <div class="main-title">
            <h1 class="title">КРИМИНАЛЬНЫЙ<br>БЛЕФ</h1>
            <p class="subtitle">Найди след убийцы</p>
        </div>

        <!-- Главная кнопка (перемещена выше) -->
        <div class="main-action">
            <a href="/game" class="start-button">
                🔍 Вскрыть дело
            </a>
        </div>

        <!-- Быстрая статистика (компактная версия) -->
        <div class="quick-stats">
            <div class="quick-stat">
                <span class="quick-stat-value">60</span>
                <span class="quick-stat-label">секунд на дело</span>
            </div>
            <div class="quick-stat">
                <span class="quick-stat-value">1000+</span>
                <span class="quick-stat-label">криминальных историй</span>
            </div>
            <div class="quick-stat">
                <span class="quick-stat-value">3</span>
                <span class="quick-stat-label">варианта ответа</span>
            </div>
        </div>

        <!-- Информационные карточки (обновленные) -->
        <div class="info-cards">
            <div class="info-card">
                <div class="card-label">Досье №001</div>
                <div class="card-header">
                    <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,2L13.09,8.26L20,9L13.09,9.74L12,16L10.91,9.74L4,9L10.91,8.26L12,2Z" />
                    </svg>
                    <h2 class="card-title">🎖️ Детективные звания</h2>
                </div>
                <p class="card-description">
                    <strong>🚀 20 званий:</strong> От Подозреваемого до Легенды<br>
                    <strong>📊 Прогресс:</strong> Каждое дело приближает к новому званию<br>
                    <strong>🎯 Мастерство:</strong> Специализируйтесь на разных типах дел<br>
                    <strong>🏆 Достижения:</strong> Разблокируйте награды за успехи
                </p>
            </div>

            <div class="info-card">
                <div class="card-label">Протокол №002</div>
                <div class="card-header">
                    <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M5,16H3V4H20V6H18V16H5M18,6V16H15V4H20V6H18M3,16V19H4V18H5V20H4V21H18V20H17V18H18V19H19V16H3Z" />
                    </svg>
                    <h2 class="card-title">🔥 Бонусы за качество</h2>
                </div>
                <p class="card-description">
                    <strong>🎯 Идеальное решение:</strong> Дополнительный опыт<br>
                    <strong>⚡ Быстрая реакция:</strong> Бонус за скорость<br>
                    <strong>🏆 Сложные дела:</strong> Больше наград<br>
                    <strong>🔥 Серии побед:</strong> Накопительные бонусы<br>
                    <strong>🌅 Ежедневная игра:</strong> Особые награды
                </p>
            </div>

            <div class="info-card">
                <div class="card-label">Справка №003</div>
                <div class="card-header">
                    <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22H9M6,12V14H18V12H6M6,9V11H18V9H6M6,6V8H18V6H6Z" />
                    </svg>
                    <h2 class="card-title">💎 Система очков</h2>
                </div>
                <p class="card-description">
                    <strong>🎯 Базовые очки:</strong> 100 за правильный ответ<br>
                    <strong>⚡ Бонус скорости:</strong> До +75 очков за быстроту<br>
                    <strong>🎖️ Бонус сложности:</strong> Средний +25, Сложный +50<br>
                    <strong>💫 Идеальное дело:</strong> До +25 дополнительных очков<br>
                    <strong>👑 Максимум:</strong> 250 очков за одно дело!
                </p>
            </div>
        </div>

        <!-- Мини-блоки с дополнительной информацией -->
        <div class="mini-info-grid">
            <div class="mini-info-card">
                <div class="mini-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16,17H7V16H16M16,15H7V14H16M16,13H7V12H16M16,11H7V10H16M16,9H7V8H16M5,20V7H6V6H7V5H17V6H18V7H19V20H5Z" />
                    </svg>
                </div>
                <div class="mini-content">
                    <div class="mini-title">🎖️ 20 детективных званий</div>
                    <div class="mini-desc">От Подозреваемого до Легенды</div>
                </div>
            </div>

            <div class="mini-info-card">
                <div class="mini-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M5,16L3,14V10L5,8H7L9,10V14L7,16H5M9,14L11,16H13L15,14V10L13,8H11L9,10V14M17,8L19,10V14L17,16H15L13,14V10L15,8H17Z" />
                    </svg>
                </div>
                <div class="mini-content">
                    <div class="mini-title">🎯 Специализации детектива</div>
                    <div class="mini-desc">5 типов дел для изучения</div>
                </div>
            </div>

            <div class="mini-info-card">
                <div class="mini-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z" />
                    </svg>
                </div>
                <div class="mini-content">
                    <div class="mini-title">⚖️ Честная система</div>
                    <div class="mini-desc">Качество важнее количества</div>
                </div>
            </div>

            <div class="mini-info-card">
                <div class="mini-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z" />
                    </svg>
                </div>
                <div class="mini-content">
                    <div class="mini-title">🔥 Постепенный рост</div>
                    <div class="mini-desc">Каждое звание - достижение</div>
                </div>
            </div>
        </div>

        <!-- Система рангов и прогрессии (ПОЛНОСТЬЮ ОБНОВЛЕННАЯ) -->
        <div class="detective-methods">
            <div class="methods-header">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,13 12,19.71 12,19.71C12,19.71 17,13 17,9A5,5 0 0,0 12,4Z" />
                </svg>
                <h3>🎖️ Детективная карьера (20 званий)</h3>
            </div>
            <div class="methods-grid">
                <div class="method-item">
                    <div class="method-icon">🔰</div>
                    <div class="method-name">Подозреваемый</div>
                    <div class="method-exp">Начальное звание</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">👮‍♂️</div>
                    <div class="method-name">Стажер</div>
                    <div class="method-exp">Первые успехи</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">🕵️</div>
                    <div class="method-name">Детектив</div>
                    <div class="method-exp">Опытный сыщик</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">👑</div>
                    <div class="method-name">Капитан</div>
                    <div class="method-exp">Руководитель</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">🎖️</div>
                    <div class="method-name">Генерал</div>
                    <div class="method-exp">Высший ранг</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">👨‍⚖️</div>
                    <div class="method-name">Шеф Полиции</div>
                    <div class="method-exp">Элитный детектив</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">🏆</div>
                    <div class="method-name">Мастер-Детектив</div>
                    <div class="method-exp">Признанный мастер</div>
                </div>
                <div class="method-item">
                    <div class="method-icon">👑</div>
                    <div class="method-name">Легенда</div>
                    <div class="method-exp">Высшее достижение</div>
                </div>
            </div>

            <!-- Новый блок про специализации -->
            <div class="specializations-section">
                <h4>🎯 Специализации детектива:</h4>
                <div class="specializations-grid">
                    <div class="spec-item">
                        <span class="spec-icon">🔪</span>
                        <span class="spec-name">Убийства</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-icon">💰</span>
                        <span class="spec-name">Ограбления</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-icon">💳</span>
                        <span class="spec-name">Мошенничество</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-icon">🏃‍♂️</span>
                        <span class="spec-name">Кражи</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-icon">💻</span>
                        <span class="spec-name">Киберпреступления</span>
                    </div>
                </div>
                <p class="spec-description">
                    Развивайте мастерство в разных типах дел.<br>
                    Каждая специализация дает уникальные награды.
                </p>
            </div>
        </div>

        <!-- Компактная навигация -->
        <div class="navigation">
            <a href="/leaderboard" class="nav-button">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V5H4V18Z" />
                </svg>
                <div class="nav-text">Рейтинг</div>
            </a>

            <a href="#" class="nav-button" id="profileBtn">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" />
                </svg>
                <div class="nav-text">Профиль</div>
            </a>
        </div>

        <!-- Подвал -->
        <div class="footer">
            <div class="case-file">Case File #2024 • Classified • Detective Training Protocol</div>
        </div>
    </div>

    <script>
        // Инициализация частиц
        function createParticles() {
            const container = document.getElementById('particles');
            const particleCount = 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';

                // Разнообразие частиц
                const particleType = Math.random();
                if (particleType < 0.3) {
                    // Кровавые частицы
                    particle.style.width = '2px';
                    particle.style.height = '2px';
                    particle.style.background = '#8B0000';
                } else if (particleType < 0.5) {
                    // Золотые улики
                    particle.style.width = '3px';
                    particle.style.height = '3px';
                    particle.style.background = '#FFD700';
                    particle.style.boxShadow = '0 0 4px #FFD700';
                } else if (particleType < 0.7) {
                    // Белые пылинки
                    particle.style.width = '1px';
                    particle.style.height = '1px';
                    particle.style.background = 'rgba(255, 255, 255, 0.8)';
                } else {
                    // Красные неоновые
                    particle.style.width = '2px';
                    particle.style.height = '2px';
                    particle.style.background = '#FF073A';
                    particle.style.boxShadow = '0 0 3px #FF073A';
                }

                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 15) + 's';
                container.appendChild(particle);
            }

            // Добавляем дополнительные эффекты каждые несколько секунд
            setInterval(() => {
                if (container.children.length > 30) return;

                const extraParticle = document.createElement('div');
                extraParticle.className = 'particle';
                extraParticle.style.width = '1px';
                extraParticle.style.height = '1px';
                extraParticle.style.background = '#DC143C';
                extraParticle.style.left = Math.random() * 100 + '%';
                extraParticle.style.animationDuration = '10s';
                container.appendChild(extraParticle);

                // Удаляем через время
                setTimeout(() => {
                    if (extraParticle.parentNode) {
                        extraParticle.parentNode.removeChild(extraParticle);
                    }
                }, 10000);
            }, 5000);
        }

        // Инициализация Telegram WebApp
        let tg;
        let user;

        function initTelegramWebApp() {
            console.log('[TG WebApp] Инициализация...');

            if (typeof window !== 'undefined' && window.Telegram && window.Telegram.WebApp) {
                tg = window.Telegram.WebApp;

                try {
                    tg.ready();
                    console.log('[TG WebApp] Готов к работе');

                    // Получаем данные пользователя
                    user = tg.initDataUnsafe?.user;
                    console.log('[TG WebApp] Данные пользователя:', user);

                    // Расширяем приложение
                    tg.expand();

                    // Настраиваем тему
                    document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#0A0A0A');
                    document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#F5F5DC');

                } catch (error) {
                    console.error('[TG WebApp] Ошибка инициализации:', error);
                }
            } else {
                console.log('[TG WebApp] Запуск вне Telegram');
            }
        }

        // Обработчик кнопки профиля
        async function handleProfileAccess() {
            console.log('[Profile] Доступ к профилю...');

            try {
                // Проверяем существующий токен
                const existingToken = localStorage.getItem('detective_token');
                console.log('[Profile] Существующий токен:', existingToken ? 'есть' : 'нет');

                if (!existingToken) {
                    console.log('[Profile] Токена нет, выполняю авторизацию...');

                    if (!tg || !tg.initData) {
                        console.error('[Profile] Нет данных Telegram WebApp');
                        alert('Ошибка: приложение должно быть запущено из Telegram');
                        return;
                    }

                    console.log('[Profile] Отправляю запрос авторизации...');
                    const response = await fetch('/api/auth/init', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            initData: tg.initData
                        })
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('[Profile] Ошибка авторизации:', response.status, errorText);
                        alert('Ошибка авторизации. Попробуйте позже.');
                        return;
                    }

                    const data = await response.json();
                    console.log('[Profile] Авторизация успешна');

                    if (data.token) {
                        localStorage.setItem('detective_token', data.token);
                        console.log('[Profile] Токен сохранён');
                    }
                }

                // Переходим в профиль
                console.log('[Profile] Переход в профиль...');
                window.location.href = '/profile';

            } catch (error) {
                console.error('[Profile] Ошибка:', error);
                alert('Ошибка доступа к профилю. Проверьте соединение и попробуйте снова.');
            }
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function () {
            console.log('[App] Загрузка страницы...');

            // Создаём частицы
            createParticles();

            // Инициализируем Telegram WebApp
            initTelegramWebApp();

            // Настраиваем обработчик кнопки профиля
            const profileBtn = document.getElementById('profileBtn');
            if (profileBtn) {
                profileBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    handleProfileAccess();
                });
            }

            // Скрываем loader и показываем контент
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('mainContainer').style.opacity = '1';
                console.log('[App] Приложение готово');
            }, 1500);
        });

        // Обработка ошибок
        window.addEventListener('error', function (e) {
            console.error('[App] Глобальная ошибка:', e.error);
        });

        window.addEventListener('unhandledrejection', function (e) {
            console.error('[App] Необработанное отклонение промиса:', e.reason);
        });
    </script>
</body>

</html>